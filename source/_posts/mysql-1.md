---
title: MySQL的引擎机制
date: 2018-03-07 14:32:43
tags:
  -  MySQL
categories:  
  -  MySQL 
type: tags
---

### MySQL的引擎机制
数据库索引引擎也是非常重要的一部分，这篇来了解一下Mysql的几种引擎机制。
####  InnoDB存储引擎
InnoDB是事务型数据库的首选引擎，MySQL的默认引擎就是它，它具有的特性：
1. InnoDB给MySQL提供了具有提交、回滚和崩溃恢复能力的事物安全（ACID兼容）存储引擎。InnoDB锁定在行级并且也在SELECT语句中提供一个类似Oracle的非锁定读。这些功能增加了多用户部署和性能。在SQL查询中，可以自由地将InnoDB类型的表和其他MySQL的表类型混合起来，甚至在同一个查询中也可以混合
2. InnoDB是为处理巨大数据量的最大性能设计。它的CPU效率可能是任何其他基于磁盘的关系型数据库引擎锁不能匹敌的
3. InnoDB存储引擎完全与MySQL服务器整合，InnoDB存储引擎为在主内存中缓存数据和索引而维持它自己的缓冲池。InnoDB将它的表和索引在一个逻辑表空间中，表空间可以包含数个文件（或原始磁盘文件）。这与MyISAM表不同，比如在MyISAM表中每个表被存放在分离的文件中。InnoDB表可以是任何尺寸，即使在文件尺寸被限制为2GB的操作系统上。
4. InnoDB支持外键完整性约束，存储表中的数据时，每张表的存储都按主键顺序存放，如果没有显示在表定义时指定主键，InnoDB会为每一行生成一个6字节的ROWID，并以此作为主键
5. InnoDB被用在众多需要高性能的大型数据库站点上

#### MyISAM存储引擎
MyISAM查询速度快，但是不支持事务。
1. 大文件（达到63位文件长度）在支持大文件的文件系统和操作系统上被支持
2. 当把删除和更新及插入操作混合使用的时候，动态尺寸的行产生更少碎片。这要通过合并相邻被删除的块，以及若下一个块被删除，就扩展到下一块自动完成
3. 每个MyISAM表最大索引数是64，这可以通过重新编译来改变。每个索引最大的列数是16
4. 最大的键长度是1000字节，这也可以通过编译来改变，对于键长度超过250字节的情况，一个超过1024字节的键将被用上
5. BLOB和TEXT列可以被索引
6. NULL被允许在索引的列中，这个值占每个键的0~1个字节
7. 所有数字键值以高字节优先被存储以允许一个更高的索引压缩
8. 每个MyISAM类型的表都有一个AUTO_INCREMENT的内部列，当INSERT和UPDATE操作的时候该列被更新，同时AUTO_INCREMENT列将被刷新。所以说，MyISAM类型表的AUTO_INCREMENT列更新比InnoDB类型的AUTO_INCREMENT更快
9. 可以把数据文件和索引文件放在不同目录
10. 每个字符列可以有不同的字符集
11. 有VARCHAR的表可以固定或动态记录长度
12. VARCHAR和CHAR列可以多达64KB

### 总结
- 如果要提供提交回滚、崩溃恢复能力事物安全（ACID兼容）能力，并要求实现并发控制，InnoDB是一个好的选择。
- 如果数据表主要用来插入和查询记录，则MyISAM引擎能提供较高的处理效率


